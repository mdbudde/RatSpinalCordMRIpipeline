{
"notes": [
      {
        "type": "fixed",
        "note": [
          "%%   5.b.1. Batch friendly |option| and |protocol| conventions",
          "% If you would like to load a desired set of |options| / |protocols| programatically,",
          "% you can use |*.qmrlab.mat| files. To save a configuration from the |protocol| panel",
          "% of |*-modelName-*|, first open the respective panel by running the following command ",
          "% in your MATLAB command window (MATLAB only):",
          "% ",
          "%   Custom_OptionsGUI(*-modelName-*); ",
          "%",
          "% In this panel, you can arrange available |options| and |protocols| according to your needs,",
          "% then click the |save| button to save |my_*-modelName-*.qmrlab.mat| file. This file can be later",
          "% loaded into a |*-modelName-*| object in batch by:",
          "% ",
          "%   Model = *-modelName-*;",
          "%   Model = Model.loadObj('my_*-modelName-*.qmrlab.mat');",
          "%%",
          "% <html>",
          "% <div class=\"info\">",
          "% <p style=\"margin:0px!important;\"><strong>&nbsp<i class=\"fa fa-info-circle\" style=\"color:navy;margin-left:5px;\"></i></strong> <code>Model.loadObj('my_*-modelName-*.qmrlab.mat')</code> call won't update the fields in the <code>Model</code> object, unless the output is assigned to the object as shown above. This compromise on convenience is to retain Octave CLI compatibility. </p>",
          "% </div>",
          "% </html>",
          "% ",
          "% *If you don't have MATLAB, hence cannot access the |GUI|, two alternatives are available to populate |options|:*",
          "% ",
          "% # Use |qmrlab/mcrgui:latest| Docker image to access |GUI|. The instructions are available <https://hub.docker.com/r/qmrlab/mcrgui here>.",
          "% # Set |options| and |protocols| in |CLI|:",
          "%",
          "% * List available option fields using tab completion in Octave's command prompt (or window)",
          "% ",
          "%   Model = *-modelName-*;",
          "%   Model.option. % click the tab button on your keyboard and list the available fields.",
          "% ",
          "% * Assign the desired field. *For example*, for a |mono_t2| object:",
          "% ",
          "%   Model = mono_t2;",
          "%   Model.options.DropFirstEcho = true;",
          "%   Model.options.OffsetTerm = false;",
          "%%",
          "% <html>",
          "% <div class=\"info\">",
          "% <p style=\"margin:0px!important;\"><strong><i class=\"fa fa-info-circle\" style=\"color:navy;margin-left:5px;\"></i></strong> Some option fields may be mutually exclusive or interdependent. Such cases are handled  by the <code>GUI</code> options panel; however, not exposed to the <code>CLI</code>. Therefore, manual <code>CLI</code> <code>options</code> assignments may be challenging for some involved methods such as <code>qmt_spgr</code> or <code>qsm_sb</code>. If above options are not working for you and you cannot infer how to set options solely in batch, please feel free to <a href=\"https://github.com/qmrlab/qmrlab\" target=\"_blank\">open an issue in qMRLab</a> and request the protocol file you need. </p>",
          "% </div>",
          "% </html>",
          "%",
          "% *Similarly, in CLI, you can inspect and assign the |protocols|:*",
          "% ",
          "%   Model = *-modelName-*;",
          "%   Model.Prot. % click the tab button on your keyboard and list the available fields.",
          "%",
          "% Each protocol field has two subfields of |Format| and |Mat|. The first one is a |cell| indicating the name of the protocol parameter (such as |EchoTime (ms)|)",
          "% and the latter one contains the respective values (such as |30 x 1 double| array containing |EchoTimes|).",
          "%%",
          "% <html>",
          "% <div class=\"warning\">",
          "% <p style=\"margin:0px!important;\"> The default <code>Mat</code> protocol values are set according to the example datasets served via <a href=\"https://osf.io/tmdfu\" target=\"_blank\">OSF</a>.</p>",
          "% </div>",
          "% </html>"
        ]
      },
      { "type": "conditional",
        "voxelwise": true,
        "note": [
          "%%     5.b.2 Parallelization",
          "% Beginning from release |2.5.0|, you can accelerate fitting for the |voxelwise| models",
          "% using parallelization.",
          "%%",
          "% <html>",
          "% <div class=\"danger\">",
          "% <p style=\"margin:0px!important;\"> <strong>Available in MATLAB only. Requires <code>parallel processing toolbox</code>.</strong></p>",
          "% </div>",
          "% </html>",
          "%",
          "% In |CLI|, you can perform parallel fitting by:",
          "% ",
          "%   parpool();",
          "%   FitResults = ParFitData(data,Model);",
          "% ",
          "% If a |parpool| exists, the |ParFitData| will use it. If not, a new pool will be created using the local profile. By default, ",
          "% |ParFitData| saves outputs automatically every 5 minutes. You can disable this feature by:",
          "% ",
          "%   FitResults = ParFitData(data, Model, 'AutosaveEnabled', false);",
          "% ",
          "% Alternatively, you can change the autosave interval (min 1 min) by:",
          "% ",
          "%   FitResults = ParFitData(data,Model,'AutoSaveInterval',10);",
          "% ",
          "% If something went wrong during the fitting (e.g. your computer had to be restarted), you can recover ",
          "% the autosaved data by:",
          "% ",
          "%   FitResults = ParFitData(data,Model,'RecoverDirectory','/ParFitTempResults_*/folder/from/the/previous/session');",
          "% ",
          "% |GUI| users will be prompted a question about whether they would like to use parallelization after clicking the |Fit Data| button, if the conditions are met.",
          "% When called from |GUI|, |ParFitData| will be run with default options: ",
          "% ",
          "% * Save temporary results every |5| minutes or whenever a chunk has finished processing",
          "% * Split data into chunks with a |granularity| factor of |3|",
          "% * Do not remove temporary fit results upon completion",
          "% ",
          "% For further information:",
          "% ",
          "%   help ParFitData",
          "% ",
          "% The default |parallelization| options can be changed in the |preferences.json| file located at the root qMRLab directory."
                ]
      },
      {
        "type": "conditional",
        "voxelwise": false,
        "note":[
          "%%     5.b.2 Parallelization:",
          "%%",
          "% <html>",
          "% <div class=\"danger\">",
          "% <p style=\"margin:0px!important;\"> The current model does not perform voxelwise fitting. Therefore, parallelization is not enabled.</p>",
          "% </div>",
          "% </html>"
               ] 
      }
    ]
}






